<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Blog of Yangjing Zhang]]></title>
  <link href="http://zhangyangjing.github.com/atom.xml" rel="self"/>
  <link href="http://zhangyangjing.github.com/"/>
  <updated>2013-01-24T11:08:24+08:00</updated>
  <id>http://zhangyangjing.github.com/</id>
  <author>
    <name><![CDATA[Yangjing Zhang]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[setup VPN(l2tp over ipsec) on ubuntu with linode vps]]></title>
    <link href="http://zhangyangjing.github.com/blog/2013/01/23/setup-vpn-l2tp-over-ipsec-on-ubuntu-with-linode-vps/"/>
    <updated>2013-01-23T16:08:00+08:00</updated>
    <id>http://zhangyangjing.github.com/blog/2013/01/23/setup-vpn-l2tp-over-ipsec-on-ubuntu-with-linode-vps</id>
    <content type="html"><![CDATA[<h2>introduction</h2>

<p>usage tools:</p>

<ol>
<li><p>openwan</p>

<p> <em>provide ipsec ability</em></p></li>
<li><p>ppp</p>

<p> <em>suport for ppp</em></p></li>
<li><p>xl2tpd</p>

<p>  <em>support for l2tp</em></p></li>
</ol>


<h2>step</h2>

<ul>
<li><p>install openwan</p>

<p>  <code>
  apt-get install openswan
 </code>
  edit /etc/ipsec.conf
  &#8220;`
  version 2.0</p>

<p>  config setup</p>

<pre><code>  nat_traversal=yes

  virtual_private=%v4:10.0.0.0/8,%v4:192.168.0.0/16,%v4:172.16.0.0/12

  oe=off

  protostack=netkey
</code></pre>

<p>  conn L2TP-PSK-NAT</p>

<pre><code>  rightsubnet=vhost:%priv

  also=L2TP-PSK-noNAT
</code></pre>

<p>  conn L2TP-PSK-noNAT</p>

<pre><code>  authby=secret

  pfs=no

  auto=add

  keyingtries=3

  rekey=no

  ikelifetime=8h

  keylife=1h

  type=transport

  left=106.186.21.127

  leftprotoport=17/1701

  right=%any

  rightprotoport=17/%any
</code></pre>

<p>  &#8220;`</p>

<p>  edit /etc/ipsec.secrets</p></li>
</ul>


<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>106.186.21.127 %any: PSK "7758521"</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>install ppp</p>

<p>  <code>
  apt-get install ppp
 </code></p></li>
<li><p>install xl2tpd</p>

<p>  <code>
  apt-get install xl2tpd
 </code></p></li>
<li>setup init script</li>
</ul>


<h2>link</h2>

<ul>
<li><p><a href="http://hi.baidu.com/ylm_tz/item/aa01cb01da1c94a03c42e2f2">http://hi.baidu.com/ylm_tz/item/aa01cb01da1c94a03c42e2f2</a></p></li>
<li><p><a href="http://blog.tech4k.com/?p=745">http://blog.tech4k.com/?p=745</a></p></li>
<li><p><a href="http://b.gkp.cc/2010/06/19/setup-ipsec-l2tp-on-centos-55/">http://b.gkp.cc/2010/06/19/setup-ipsec-l2tp-on-centos-55/</a></p></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[first blog of zyj]]></title>
    <link href="http://zhangyangjing.github.com/blog/2013/01/22/first-blog-of-zyj/"/>
    <updated>2013-01-22T22:13:00+08:00</updated>
    <id>http://zhangyangjing.github.com/blog/2013/01/22/first-blog-of-zyj</id>
    <content type="html"><![CDATA[
]]></content>
  </entry>
  
</feed>
